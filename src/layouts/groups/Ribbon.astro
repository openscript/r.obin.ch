---
import { parseLocale } from "../../utils/i18n";
import Navigation from "../../components/Navigation.astro";
import LanguageSwitcher from "../../components/LanguageSwitcher.astro";
import { prepareNavigation } from "../../utils/paths";

type Props = {
  translations?: Record<string, string>;
};

const { translations } = Astro.props;

const locale = parseLocale(Astro.params.locale);
const navigation = await prepareNavigation(`ribbon/${locale}`);
---

<div id="ribbon" transition:animate="none">
  <Navigation items={navigation} />
  <LanguageSwitcher translations={translations} currentLocale={locale} />
</div>

<style>
  div {
    background-color: var(--color-primary-120);
    color: var(--color-white);
    font-size: 0.8rem;
    padding-top: var(--gap-tiny);
    padding-bottom: var(--gap-tiny);
    display: flex;
    align-items: center;
    justify-content: space-between;

    nav {
      &:not(.language-switcher) {
        flex-grow: 1;
        max-width: 100%;
        margin-right: 1rem;
        overflow-x: scroll;
        mask-image: linear-gradient(to right, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent);
        scrollbar-width: none;
      }

      &.language-switcher .active {
        display: none;
      }

      ul {
        display: flex;
        gap: var(--gap);

        li {
          display: flex;
          justify-content: center;
          flex-shrink: 0;
          white-space: nowrap;

          a {
            display: inline-flex;
            align-items: center;
            gap: var(--gap-tiny);
            transition: var(--transition-duration);
            filter: grayscale(1);

            &:hover {
              filter: grayscale(0);
            }
          }
        }
      }
    }
  }
</style>
